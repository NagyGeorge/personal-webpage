{% for post in page_obj %}
    <article class="border-b pb-6 mb-6">
        <h2 class="text-2xl font-semibold mb-2">
            <a href="{% url 'blog_detail' post.slug %}" class="hover:text-blue-600">
                {{ post.title }}
            </a>
        </h2>

        <div class="text-gray-600 text-sm mb-3">
            <time datetime="{{ post.created_at|date:'c' }}">{{ post.created_at|date:"F d, Y" }}</time>
            {% if post.tags.exists %}
                <span class="mx-2">•</span>
                {% for tag in post.tags.all %}
                    <span class="bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs mr-1">
                        {{ tag.name }}
                    </span>
                {% endfor %}
            {% endif %}
        </div>

        <p class="text-gray-700 mb-3">
            {{ post.excerpt|default:post.body|truncatewords:30 }}
        </p>

        <a href="{% url 'blog_detail' post.slug %}" class="text-blue-600 hover:underline">
            Read more →
        </a>
    </article>
{% empty %}
    <p class="text-gray-600">No blog posts available.</p>
{% endfor %}

{% if page_obj.has_next %}
    <div class="text-center mt-8">
        <button
            hx-get="{% url 'blog_index' %}?page={{ page_obj.next_page_number }}"
            hx-target="#posts-container"
            hx-swap="beforeend"
            class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">
            Load More Posts
        </button>
    </div>
{% endif %}
